<table class="calendar">
	<thead>
		<tr><th><%= link_to "&lt;&lt;", { :action => 'index', :date => calendar.last_month }, { :title => "Mois précédent" } %></th><th colspan="6"><%= calendar.to_s(:month) %></th><th><%= link_to "&gt;&gt;", { :action => 'index', :date => calendar.next_month }, { :title => "Mois suivant" } %></th></tr>
		<tr class="week"><th></th><th>Lun</th><th>Mar</th><th>Mer</th><th>Jeu</th><th>Ven</th><th>Sam</th><th>Dim</th></tr>
	</thead>
	<tbody>
<% calendar.weeks_of_month.each do |week| -%>
		<tr class="week">
			<th><%= week.first.week_number %><br/><span class="select_links" onclick="check_all(<%= ids_of_week(week) %>)">Cocher</span> <span class="select_links" onclick="uncheck_all(<%= ids_of_week(week) %>)">Décocher</span></th>
<% week.each do |date| -%>
<% if date.is_weekend? -%>
			<td><table class="<%= calendar_classes_of(date, calendar.month) %>"><tr><td><%= date.day %></td></tr><tr><td>&nbsp;</td></tr></table></td>
<% else -%>
			<td><table class="<%= calendar_classes_of(date, calendar.month) %>"><tr><td colspan="2"><span class="day" onclick="toggle_check_all(<%= ids_of_day(date) %>)"><%= date.day %></span></td></tr><tr><td><input type="checkbox" name="am<%= date.to_s(:number) %>" id="am<%= date.to_s(:number) %>" title="matin" /></td><td><input type="checkbox" name="pm<%= date.to_s(:number) %>" id="pm<%= date.to_s(:number) %>" title="après midi" /></td></tr></table></td>
<% end -%>
<% end -%>
		</tr>
<% end -%>
	</tbody>
</table>
